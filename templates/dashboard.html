{% extends 'base.html' %}

{% block content %}
	<div class="custom-container">
		<h2>欢迎, {{ user.username }}!</h2>
		<p>你的荣誉货币余额: {{ user.balance }}</p>
		<div class="honor-display" id="honor-container"></div>
		
		<br/>
		<h3>转移荣誉货币</h3>
		<form method="POST" action="{{ url_for('transfer') }}">
		    <input type="text" name="recipient" placeholder="接收者用户名" required>
		    <input type="number" name="amount" placeholder="转移金额" required min="1">
		    <button type="submit">转移</button>
		</form>
		
		<br/>
		
		<!-- 添加销户确认链接 -->
		<a href="{{ url_for('delete_account') }}">
			<button type="submit" class="custom-btn">
				销户
			</button>
		</a>
	</div>
	<script>
		const honorPoints = {{ user.balance }}; // 示例荣誉货币数量
        const container = document.getElementById("honor-container");

        // 计算完整图标数和部分图标的比例
        const fullIcons = Math.floor(honorPoints / 10);
        const partialIconPercentage = (honorPoints % 10) * 10; // 部分图标的填充百分比

        // 添加完整图标
        for (let i = 0; i < fullIcons; i++) {
            const icon = document.createElement("div");
            icon.className = "honor-icon full";
            container.appendChild(icon);
        }

        // 添加部分图标
        if (partialIconPercentage > 0) {
            const partialIcon = document.createElement("div");
            partialIcon.className = "honor-icon partial";
            partialIcon.style.clipPath = `inset(0 ${100 - partialIconPercentage}% 0 0)`;
            container.appendChild(partialIcon);
        }
	</script>
	
{% endblock %}

